# 业务场景

## 如何实现前端截图

- html2canvas

- Puppeteer (**/ˈpʌpɪtɪər/**) 无头浏览器

- 手动绘制（简单的页面内容）

## js 最大数 Number 计算如何处理

- `new BigInt()` 类型

- big.js

## js 浮点数计算如何处理

- 先乘系数，计算后再除回去

- big.js、decimal.js

## 文件上传与下载

blob：web API 形式的文件对象，存储了文件的二进制数据之外包含文件信息、操作方法；

File：JS 内置文件类，继承自 blob

### 大文件上传与下载

**流式传输**

流式上传：createWriteStream

流式下载：createStream

**分片传输**

分片下载：head 获取文件大小，range 请求分片

分片上传

### 如何实现分片上传？

选中的文件 File 对象 slice 分片（chunkSize）

从后端获取标识 id，手动构建 FormData 上传分片

将 startByte/endByte/fileSize 等分片/文件元信息通过 request header 或 body 参数传递，方便后端操作与进度返回；

**上传中途关闭怎么解决**

前端调用“取消上传”接口通知后端处理（删除分片），后端超时分片自动清理，定时扫描未完成的分片清理；

**断点续传**

顺序上传：抽象出上传任务，保证记录任务的 startByte 状态，重新执行上传任务即可；

**注**：以上是简单的顺序分片上传，对于并行分片上传，需要前后端额外处理；或第三方 OSS SDK

总结：具体场景具体分析，复杂度、技术支持和业务需求共同决定；
